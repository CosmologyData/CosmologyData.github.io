title: 开发过程中遇到的一些坑
date: 2015-12-27 19:23:16
tags: javascript
---
### IE9以下，诡异的空白BUG ###
简单的说，就是打开页面空白，不显示任何内容。
但是只要打开控制台，就能够正常打开页面，是不是很诡异？
这里有个诡异的问题，就是在IE9以及以下，只有打开控制台，IE才会实例化console对象。
所以，只要你的js代码里面，带有console对象的方法，比如console.log( data )，那么在IE10以下打开页面就会报错。
这个IE确实很蛋疼，但是奈何还是有很多人用IE，还是有很多的小白连打字都不利索，没办法不兼容....
下面是我在网上找到的代码
<!--more-->
```bash
    <!--[if lte IE 9]>
    <script>
      // Avoid `console` errors in browsers that lack a console.only fo damn it IE,which is bullshit,holy shit!
      (function() {
        var method;
        var noop = function () {};
        var methods = [
          'assert', 'clear', 'count', 'debug', 'dir', 'dirxml', 'error',
          'exception', 'group', 'groupCollapsed', 'groupEnd', 'info', 'log',
          'markTimeline', 'profile', 'profileEnd', 'table', 'time', 'timeEnd',
          'timeStamp', 'trace', 'warn'
        ];
        var length = methods.length;
        var console = (window.console = window.console || {});
        while (length--) {
          method = methods[length];
          // Only stub undefined methods.
          if (!console[method]) {
            console[method] = noop;
          }
        }
      }());
    </script>
    <![endif]-->
```
简单说一下原理。
使用IE特有的if语句(GTMD IE)判断是否是ie9
如果不存在console对象那么就自己初始化一个console对象，并且挂载了一堆方法，都执行一个叫noop的空函数，不至于报错。
